(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{13:function(e,t,n){e.exports=n(40)},19:function(e,t,n){},39:function(e,t,n){},40:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),l=n(12),u=n.n(l),o=(n(19),n(2)),c=n(3),i=function(e){return r.a.createElement("form",{onSubmit:e.submitCommand},r.a.createElement("table",null,r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("td",null,"Nimi: "),r.a.createElement("td",null,r.a.createElement("input",{value:e.nameValue,onChange:e.nameChange,placeholder:"Nimi"}))),r.a.createElement("tr",null,r.a.createElement("td",null,"Numero: "),r.a.createElement("td",null,r.a.createElement("input",{value:e.numberValue,onChange:e.numberChange,placeholder:"Numero"}))))),r.a.createElement("div",null,r.a.createElement("button",{type:"submit"},"Lis\xe4\xe4")))},m=function(e){var t=e.filterChange;return r.a.createElement("table",null,r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("td",null,"Rajaa n\xe4ytett\xe4vi\xe4: "),r.a.createElement("td",null,r.a.createElement("input",{onChange:t,placeholder:"Nimi tai numero..."})))))},s=function(e){var t=e.person,n=e.handler;return r.a.createElement("tr",null,r.a.createElement("td",null,t.name),r.a.createElement("td",null,t.number),r.a.createElement("td",null,r.a.createElement("button",{onClick:n},"poista")))},f=function(e){var t=e.nimet,n=e.handleDelete;return r.a.createElement("table",null,r.a.createElement("tbody",null,t.map(function(e){return r.a.createElement(s,{person:e,key:t.indexOf(e),handler:function(){return n(e.id)}})})))},d=function(e){var t=e.message,n=e.messageType;return null===t?null:r.a.createElement("div",{className:n},t)},h=n(4),b=n.n(h),p="/api/persons",E=function(){return b.a.get(p).then(function(e){return e.data})},g=function(e){return b.a.post(p,e).then(function(e){return e.data})},j=function(e){return b.a.delete("".concat(p,"/").concat(e)).then(function(e){return e.data})},v=function(e,t){return b.a.put("".concat(p,"/").concat(e),t).then(function(e){return e.data})},w=(n(39),function(){var e=Object(a.useState)([]),t=Object(c.a)(e,2),n=t[0],l=t[1],u=Object(a.useState)(""),s=Object(c.a)(u,2),h=s[0],b=s[1],p=Object(a.useState)(""),w=Object(c.a)(p,2),y=w[0],O=w[1],C=Object(a.useState)(""),x=Object(c.a)(C,2),k=x[0],N=x[1],L=Object(a.useState)({text:null,type:"info"}),T=Object(c.a)(L,2),S=T[0],K=T[1];Object(a.useEffect)(function(){E().then(function(e){l(e)})},[]);var P=0!==k.length?n.filter(function(e){return e.name.toLowerCase().includes(k.toLowerCase())|e.number.includes(k)}):n;return r.a.createElement("div",{className:"base"},r.a.createElement("h2",null,"Puhelinluettelo"),r.a.createElement(d,{message:S.text,messageType:S.type}),r.a.createElement(m,{filterChange:function(e){return N(e.target.value)}}),r.a.createElement("h3",null,"Lis\xe4\xe4 uusi"),r.a.createElement(i,{submitCommand:function(e){e.preventDefault();var t=h.trim();if(0!==t.length||0!==y.trim().length)if(0!==t.length)if(0!==y.trim().length)if(y&&n.find(function(e){return e.name.toLowerCase()===t.toLowerCase()})){if(window.confirm("".concat(t," on jo luettelossa. Korvataanko vanha numero uudella?"))){var a=n.find(function(e){return e.name.toLowerCase()===t.toLowerCase()}),r=Object(o.a)({},a,{number:y});return void v(r.id,r).then(function(e){l(n.map(function(t){return t.id!==r.id?t:e})),b(""),O("")}).then(function(){K({text:"K\xe4ytt\xe4j\xe4n ".concat(r.name," numeroksi p\xe4ivitettiin ").concat(r.number,"."),type:"info"})}).then(setTimeout(function(){K(Object(o.a)({},S,{text:null}))},5e3)).catch(function(e){K({text:"K\xe4ytt\xe4j\xe4n ".concat(r.name," numeron muuttamisessa oli ongelma: ").concat(e.response.data.error,"."),type:"error"}),setTimeout(function(){K(Object(o.a)({},S,{text:null}))},7e3)})}}else{var u={name:t,number:y};g(u).then(function(e){l(n.concat(e)),b(""),O("")}).then(function(){K({text:"Lis\xe4ttiin ".concat(u.name," numerolla ").concat(u.number,"."),type:"info"})}).then(setTimeout(function(){K(Object(o.a)({},S,{text:null}))},5e3)).catch(function(e){console.log(e.response.data),K({text:"K\xe4ytt\xe4j\xe4n ".concat(u.name," lis\xe4\xe4misess\xe4 oli ongelma: ").concat(e.response.data.error,"."),type:"error"}),setTimeout(function(){K(Object(o.a)({},S,{text:null}))},7e3)})}else window.alert("Puhelinnumero on pakollinen.");else window.alert("Nimi on pakollinen.");else window.alert("Nimi ja puhelinnumero ovat pakollisia kentti\xe4.")},nameChange:function(e){return b(e.target.value)},nameValue:h,numberChange:function(e){return O(e.target.value)},numberValue:y}),r.a.createElement("h3",null,"Numerot"),r.a.createElement(f,{nimet:P,handleDelete:function(e){return function(e){var t=n.find(function(t){return t.id===e}).name;window.confirm("Poistetaanko ".concat(t," puhelinluettelosta?"))&&j(e).then(l(n.filter(function(t){return t.id!==e}))).then(function(){K({text:"Poistettiin ".concat(t,"."),type:"info"})}).then(setTimeout(function(){K(Object(o.a)({},S,{text:null}))},5e3)).catch(function(e){K({text:"K\xe4ytt\xe4j\xe4 ".concat(t," oli jo poistettu."),type:"error"}),setTimeout(function(){K(Object(o.a)({},S,{text:null}))},7e3)})}(e)}}))});u.a.render(r.a.createElement(w,null),document.getElementById("root"))}},[[13,1,2]]]);
//# sourceMappingURL=main.3d858135.chunk.js.map